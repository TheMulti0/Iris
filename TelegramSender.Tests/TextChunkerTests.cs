using System;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace TelegramSender.Tests
{
    [TestClass]
    public class TextChunkerTests
    {
        private const string ShortText = "tes!t";
        private const string LongText =
            "במטרה לסייע למגזר העסקי ולמשק לאחר משבר הקורונה, החליטו ראש הממשלה, נפתלי בנט, שר האוצר, אביגדור ליברמן ושר המשפטים, גדעון סער, לקדם תכנית לאומית לשיפור הרגולציה והפחתת הנטל הרגולטורי העודף. את התכנית גיבשו משרד ראש הממשלה, משרד האוצר ומשרד המשפטים על בסיס המלצות ה-OECD.\r\n\r\nהתכנית כוללת לראשונה חקיקה של חוק מסגרת לרגולציה שימסד תשתיות ארוכות טווח לגיבוש רגולציה בישראל והקמה של רשות רגולציה שתפקח על תהליכי קביעת רגולציה חדשה, ותפעל להפחתת הנטל הרגולטורי העודף. במסגרת החוק ייקבעו עקרונות לרגולציה מיטבית ביניהם, ניהול סיכונים, התבססות על סטנדרטים בין-לאומיים, קידום כלכלה תחרותית, הפחתת יוקר מחייה, ורגולציה מותאמת לעסקים קטנים ובינוניים.\r\n\r\nבמסגרת התכנית, סיוע בטווח המיידי של הקלות נטל זמניות, לרבות ריסון של רגולציה חדשה במטרה ליצור ודאות לעסקים בעת היציאה מהמשבר ולאפשר להם להתמקד בפיתוח העסקי, ודחייה בהשקעות שהם נדרשים לבצע מתוקף דרישות רגולטוריות. זאת לצד רפורמה ברישוי עסקים שתקל על פתיחת עסקים וקבלת רישוי עסק.\r\n\r\nלהלן הצעדים העיקריים בתכנית:\r\n\r\n1. הקמת רשות הרגולציה עם התפקידים והסמכויות הבאים:\r\nבקרה על רגולציה חדשה:\r\n* ביצוע בקרה על תהליכי קביעת רגולציה חדשה ופרסום חוו\"ד על איכות התהליך של רגולציה חדשה.\r\n* רגולציה בעלת השפעה משמעותית שהצביעה עליה הרשות שלא נעשתה בהליך מקצועי, תדרוש את אישור ועדת שרים לרגולציה בטרם קידומה.\r\nהפחתת מלאי הרגולציה:\r\n* קביעת מנגנון \"אמץ או הסבר\" – הרשות תפנה לרגולטורים עם בקשות לתיקון רגולציה ישנה ומכבידה שבאחריותם והרגולטורים יאמצו את התיקון או ינמקו מדוע הם לא חושבים שהוא נכון. אם רגולטור נמנע מלתקן ומדובר ברגולציה ישנה, ועדת שרים לרגולציה תוכל לבטל את הרגולציה תוך שנתיים.\r\n* הממשלה תאשר לצד אישור התקציב השנתי תכנית שנתית להפחתת נטל רגולטורי וביורוקרטי עודף.\r\n\r\n2. חוק מסגרת לרגולציה:\r\n* רגולטור בעת קידום רגולציה יבחן, לצד האינטרס הציבורי עליו הוא נדרש להגן, גם את ההשלכות הישירות והעקיפות של הרגולציה, כגון – כמה תעלה הרגולציה למפוקחים, איך היא תשפיע על התחרות ויוקר המחייה, או האם היא מותאמת לעסקים קטנים ובינוניים.\r\n* הרגולציה ככלל תתבסס על סטנדרטים בין לאומיים, למעט במקרים חריגים.\r\n* הרגולטורים יפרסמו כל שנה מראש את כל הרגולציה שהם רוצים לקדם כדי לייצר ודאות לעסקים ולאפשר לרגולטורים לתכנן ולתאם ביניהם מראש למניעת סתירות ומחלוקות.\r\n* חובת דיגיטציה – רגולציה חדשה שמטילה חובת רישוי שלא הייתה קיימת בעבר תונגש לעסקים ולציבור בצורה דיגיטלית.\r\n* פרסום כלל הרגולציה בצורה נגישה מנקודת המבט של הציבור באתר ממשלתי אחד.\r\n\r\n3.רפורמה ברישוי עסקים:\r\n* הקלה בתנאים הנדרשים לרישיון עסק והתאמת דרישות הרישוי למקובל בעולם.\r\n* צמצום העסקים טעוני רישוי.\r\n* קיצור משך הזמן הנדרש לעסק לקבלת רישיון וצמצום העלויות הנדרשות.\r\n\r\nבנוסף, תפעל הרשות לתיאום, תכנון וגישור בין רגולטורים, תדווח ותייעץ לממשלה בענייני רגולציה - איסוף מידע ונתונים מרגולטורים, מדידה, והערכה ותבנה מערך מסוגלות מערכתית שיכשיר, וילווה וייעץ לרגולטורים השונים\r\n\r\nהתכנית מתבססת על המלצות ה-OECD למדינת ישראל ומאמצת את הסטנדרטים המקובלים במדינות המפותחות לניהול מדיניות הרגולציה כגון ארה\"ב, בריטניה, קנדה, גרמניה, דרום קוריאה ואוסטרליה.\r\n\r\nראש הממשלה, נפתלי בנט:\r\n\"הממשלה שלנו היא ממשלה שאכפת לה מהאזרחים ועוסקת בתיקון. אנחנו באים לטפל בבעיות האמיתיות. המחירים בישראל גבוהים מאוד. אנחנו לא מוכנים לקבל את המציאות הזאת, וצריך לומר את האמת – הגורם העיקרי, גם לסרבול של העסקים וגם ליוקר המחיה, זו הממשלה עצמה, ממשלות ישראל. במקום לסרבל להם את החיים – אנחנו צריכים לפלס להם את הדרך. כל זה הולך להשתנות. הממשלה צריכה לשרת את האזרחים ולא להביא את האזרחים לרדוף אחריה בטופסולוגיה. לכן כולנו כאן. אנחנו מודיעים היום על הצעד הראשון בתכנית הדגל הכלכלית שלנו למען העצמאים ובעלי העסקים בישראל. המטרה שלה ברורה והמבחן שלנו פשוט – לצמצם משמעותית את הבירוקרטיה על עסקים ועל אזרחי מדינת ישראל\".\r\n\r\nשר האוצר, אביגדור ליברמן:\r\n\"רגולציה עודפת הפכה עם השנים לאחד החסמים העיקריים להגברת הצמיחה במשק הישראלי ולשיפור בנושא פריון ותחרות. עם כניסתי לתפקיד אמרתי שאני שואף לאמץ את כל הסטנדרטים של המדינות המתקדמות בעולם וודאי בתחום הרגולציה. שיפור ברגולציה, יביא תוצאות בתחום הפריון, להגברת התחרות במשק ולהפחתת יוקר המחיה וייצר את הוודאות הנדרשת למגזר העסקי לביצוע השקעות. ממשלות ישראל לדורותיהן תמיד הצטיינו בכתיבת דו\"חות, והרבה פחות ביישומם של אותם דו\"חות שהן בעצמן הזמינו. אין לי ספק שהפעם נצליח לכונן מהפכה אמיתית בתחום הזה ולהצעיד את המשק הישראלי למקום טוב יותר\".\r\n\r\nשר המשפטים, גדעון סער:\r\n\"מהלך עמוק של דה-רגולציה מתחייב והכרחי כבר שנים ארוכות. בעשור האחרון שמענו הרבה מאוד דיבורים ונאומים על דה-רגולציה, אבל היתה מעט מאוד עשיה בפועל. הרגולציה חיונית - אבל צריך להכניס אותה למסגרת. אנחנו חייבים מדיניות וחוק שיכניסו סדר ברגולציה בישראל ויהפכו אותה למאוזנת והגיונית. נטפל בעודף הרגולציה שמצטבר שכבה מעל שכבה, נייצר תכנית שנתית לרגולציה שתבטיח תכנון מקדים וודאות לעסקים, ובעיקר - נבטיח שהרגולטורים מפנימים את העלויות לציבור ומקיימים תהליכים סדורים\".\r\n\r\nסגן השר במשרד ראש הממשלה, אביר קארה:\r\n\"הפתרונות שהבאנו בימי מחאת השולמנים הופכים למדיניות ממשלתית רשמית! כשקל יותר לעשות עסקים – כך גם המחירים יורדים וכשהמחירים יורדים כולנו חיים טוב יותר. הקמת מנהלת הרגולציה תהיה תחת אחריותי במשרד רוה\"מ ויהיו לה כלים ויכולות לחתוך את הרגולציה והביורוקרטיה המיותרת במאצ\'טה! בין היתר יתאפשר ביטול תקנות וטפסים מיותרים, חיוב של בדיקת רגולציה ופרסום תוכנית מקדים, על מנת לוודא שהרגולציה החדשה מנוסחת בצורה חכמה ואפקטיבית, כזו שלא תפגע בבעלי העסקים. כולנו נהנה מהצמיחה הזאת – ואת הפירות תקטוף כל משפחה בישראל! סוף רגולציה במחשבה תחילה. אני מודה לראש הממשלה בנט, לשר האוצר ושר המשפטים על האמון והעבודה המשותפת למען ציבור העצמאיים והציבור הישראלי כולו\".\r\n\r\nוידאו: רועי אברהם, לע\"מ\r\nסאונד: בן פרץ, לע\"מ";

        [TestMethod]
        public void TestShort()
        {
            var messageChunks = TextChunker.ChunkText(ShortText).ToList();
            Console.WriteLine(messageChunks);
        }

        [TestMethod]
        public void TestLong()
        {
            var messageChunks = TextChunker.ChunkText(LongText).ToList();
            Console.WriteLine(messageChunks);
        }
    }
}